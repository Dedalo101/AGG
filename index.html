<!DOCTYPE html>
<html lang="en">

    <head>
        <meta http-equiv="Content-Security-Policy"
            content="default-src 'self'; script-src 'self' 'unsafe-eval' 'unsafe-inline' https://formspree.io https://widget.intercom.io https://api-iam.intercom.io https://js.intercomcdn.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; img-src 'self' https: data:; font-src 'self' https:; connect-src 'self' https: https://api-iam.intercom.io https://widget.intercom.io;">
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description"
            content="Find your dream home with our expert real estate services. Get personalized property recommendations and market insights.">
        <meta name="keywords" content="real estate, properties, homes, buy house, sell property, real estate agent">
        <meta name="author" content="AGG.homes - Real Estate Agent">
        <meta name="robots" content="index, follow">

        <!-- Performance optimizations -->
        <link rel="dns-prefetch" href="//fonts.googleapis.com">
        <link rel="dns-prefetch" href="//fonts.gstatic.com">
        <link rel="dns-prefetch" href="//images.unsplash.com">
        <link rel="dns-prefetch" href="//formspree.io">
        <link rel="dns-prefetch" href="//widget.intercom.io">
        <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
        <link rel="preconnect" href="https://images.unsplash.com" crossorigin>
        <link rel="preconnect" href="https://widget.intercom.io" crossorigin>

        <!-- Preload LCP image for optimal performance -->
        <link rel="preload" as="image" href="https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?auto=format&fit=crop&w=1350&q=80">

        <!-- Fallback for critical CSS -->
        <noscript><link rel="stylesheet" href="css/critical.css"></noscript>

        <!-- Open Graph / Facebook -->
        <meta property="og:type" content="website">
        <meta property="og:title" content="Find Your Dream Home | Premier Real Estate Agency">
        <meta property="og:description" content="Find your dream home in Costa del Sol with AGG Homes. Expert real estate services, personalized property recommendations, market insights, and professional guidance for buying/selling properties in Marbella, Estepona, and throughout Spain's premier coastal region.">
        <meta property="og:image" content="https://agg.homes/images/hero-property.jpg">
        <meta property="og:url" content="https://agg.homes/">
        <!-- Twitter -->
        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:title" content="Find Your Dream Home | Premier Real Estate Agency">
        <meta name="twitter:description" content="Find your dream home in Costa del Sol with AGG Homes. Expert real estate services, personalized property recommendations, market insights, and professional guidance for buying/selling properties in Marbella, Estepona, and throughout Spain's premier coastal region.">
        <meta name="twitter:image" content="https://agg.homes/images/hero-property.jpg">
        <!-- Web App Manifest -->
        <link rel="manifest" href="/manifest.json">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="default">
        <meta name="apple-mobile-web-app-title" content="AGG Homes">
        <link rel="apple-touch-icon" href="/images/icon-192x192.png">
        <title>Find Your Dream Home | Premier Real Estate Agency</title>

        <!-- Self-referential canonical for en version -->
        <link rel="canonical" href="https://agg.homes/">
        <!-- Correct hreflang implementation -->
        <link rel="alternate" hreflang="en" href="https://agg.homes/">
        <link rel="alternate" hreflang="es" href="https://agg.homes/es/">
        <link rel="alternate" hreflang="nl" href="https://agg.homes/nl/">
        <link rel="alternate" hreflang="x-default" href="https://agg.homes/">

        <!-- Structured Data -->
        <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "RealEstateAgent",
    "name": "AGG Homes",
    "alternateName": "AGG Real Estate",
    "description": "Premier real estate agency specializing in luxury properties in Costa del Sol, Spain. Expert real estate services including property search, market analysis, negotiation, and closing assistance for international buyers.",
    "url": "https://agg.homes",
    "logo": "https://agg.homes/images/logo.png",
    "image": "https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?auto=format&fit=crop&w=1350&q=80",
    "telephone": "+31617622375",
    "email": "agg@post.com",
    "address": {
        "@type": "PostalAddress",
        "streetAddress": "Nueva Andalucia",
        "addressLocality": "Marbella",
        "addressRegion": "Málaga",
        "postalCode": "29660",
        "addressCountry": "ES"
    },
    "geo": {
        "@type": "GeoCoordinates",
        "latitude": "36.5101",
        "longitude": "-4.8824"
    },
    "areaServed": [
        {
            "@type": "Place",
            "name": "Costa del Sol"
        },
        {
            "@type": "Place",
            "name": "Marbella"
        },
        {
            "@type": "Place",
            "name": "Estepona"
        },
        {
            "@type": "Place",
            "name": "Spain"
        }
    ],
    "serviceType": [
        "Property Search",
        "Market Intelligence",
        "Negotiation Services",
        "Property Valuation",
        "Investment Consulting",
        "Luxury Real Estate"
    ],
    "priceRange": "€€€",
    "paymentAccepted": ["Cash", "Bank Transfer", "Mortgage"],
    "currenciesAccepted": "EUR",
    "openingHours": "Mo-Fr 09:00-18:00",
    "availableLanguage": ["English", "Spanish", "Dutch"],
    "knowsAbout": [
        "Luxury Villas",
        "Beachfront Properties",
        "Investment Properties",
        "Costa del Sol Real Estate",
        "Spanish Property Market",
        "International Property Investment"
    ],
    "slogan": "Find Your Dream Home",
    "foundingDate": "2024",
    "hasOfferCatalog": {
        "@type": "OfferCatalog",
        "name": "Luxury Properties in Costa del Sol",
        "itemListElement": [
            {
                "@type": "Offer",
                "itemOffered": {
                    "@type": "House",
                    "name": "Luxury Beachfront Villa",
                    "description": "Stunning 5-bedroom villa with panoramic sea views"
                }
            }
        ]
    },
    "contactPoint": {
        "@type": "ContactPoint",
        "telephone": "+31617622375",
        "email": "agg@post.com",
        "contactType": "Customer Service",
        "availableLanguage": ["English", "Spanish", "Dutch"],
        "hoursAvailable": {
            "@type": "OpeningHoursSpecification",
            "dayOfWeek": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"],
            "opens": "09:00",
            "closes": "18:00"
        }
    },
    "sameAs": [
        "https://www.instagram.com/agg.homes",
        "https://www.linkedin.com/company/agg-homes",
        "https://wa.me/31617622375"
    ]
}
        </script>
        <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
        {
            "@type": "ListItem",
            "position": 1,
            "name": "Home",
            "item": "https://agg.homes/"
        }
    ]
}
        </script>

        <!-- Critical CSS inlined for performance -->
        <style>
            *{margin:0;padding:0;box-sizing:border-box}body{font-family:Arial,sans-serif;background-color:#f4f4f9;color:#333}.container{max-width:1200px;margin:0 auto;padding:0 20px}:root{--primary:#003d82;--accent:#1e7e34;--text-light:#fff;--text-dark:#1a1a1a}.lang-switcher{position:fixed;top:15px;right:15px;z-index:9999;background-color:var(--accent);padding:8px 12px;border-radius:6px;box-shadow:0 2px 6px rgba(0,0,0,.2)}.lang-switcher a{color:#fff;text-decoration:none;margin:0 6px;font-size:12px;font-weight:700;transition:opacity .3s}.lang-switcher a:hover{opacity:.7}.hero{background:linear-gradient(rgba(0,0,0,.7),rgba(0,0,0,.7)),url(https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?auto=format&fit=crop&w=1350&q=80);background-size:cover;background-position:center;height:80vh;display:flex;align-items:center;justify-content:center;text-align:center;color:var(--text-light)}.hero-content h1{font-size:2.5rem;margin-bottom:1rem}.hero-content p{font-size:1.2rem;margin-bottom:1.5rem}.cta-button{background-color:var(--accent);color:#fff;padding:15px 30px;text-decoration:none;border-radius:8px;font-size:1.2rem;font-weight:700;border:2px solid var(--accent);transition:all .3s}.cta-button:hover{background-color:#fff;color:var(--accent)}
            /* Modal Styles */
            .modal-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.7);z-index:10000;display:flex;align-items:center;justify-content:center}.modal-content{background-color:#fff;border-radius:12px;max-width:500px;width:90%;max-height:80vh;overflow-y:auto;box-shadow:0 10px 30px rgba(0,0,0,.3);animation:modalFadeIn .3s ease-out}.modal-header{display:flex;justify-content:space-between;align-items:center;padding:20px 30px;border-bottom:1px solid #eee}.modal-header h3{margin:0;font-size:1.5rem;color:#333}.modal-close{background:none;border:none;font-size:2rem;cursor:pointer;color:#666;padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:background-color .2s}.modal-close:hover{background-color:#f5f5f5}.modal-body{padding:30px}.contact-options{display:flex;flex-direction:column;gap:15px}.contact-option{display:flex;align-items:center;padding:20px;border:2px solid #eee;border-radius:10px;text-decoration:none;color:#333;background-color:#fff;transition:all .3s;cursor:pointer}.contact-option:hover{border-color:var(--accent);background-color:#f8f9fa;transform:translateY(-2px)}.contact-option.whatsapp:hover{background-color:#25d366;border-color:#25d366;color:#fff}.contact-icon{font-size:2rem;margin-right:20px}.contact-text h4{margin:0 0 5px 0;font-size:1.2rem}.contact-text p{margin:0;color:#666;font-size:.9rem}@keyframes modalFadeIn{from{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}
            /* Mobile fixes */
            @media (max-width: 768px) { .hero img { display: none !important; } }
        </style>

        <!-- Non-critical CSS loaded asynchronously -->
        <link rel="stylesheet" href="css/styles.css" media="print" onload="this.media='all'; this.onload=null;">
        <link rel="stylesheet" href="css/cookie-consent.min.css" media="print" onload="this.media='all'; this.onload=null;">

        <!-- Scripts loaded with defer for better performance -->
        <script src="js/cookie-consent.min.js" defer></script>
    </head>

    <body>
        <div class="lang-switcher">
            <a href="/">EN</a> | <a href="/es/">ES</a> | <a href="/nl/">NL</a>
        </div>

        <header class="hero" aria-labelledby="hero-heading">
            <div class="hero-content">
                <h1 id="hero-heading">Find Your Dream Home</h1>
                <p>Extraordinary properties for extraordinary lives. Discover luxury real estate in Costa del Sol with AGG Homes.</p>
                <button type="button" class="cta-button" onclick="window.location.href='/experts/'">Explore Properties</button>
            </div>
            <img src="https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?auto=format&amp;fit=crop&amp;w=1350&amp;q=80" alt="Luxury beachfront property in Costa del Sol, Spain - panoramic Mediterranean sea views with modern architecture" loading="eager" decoding="async">
            <div class="sr-only">Luxury beachfront property in Costa del Sol, Spain - panoramic Mediterranean sea views with modern architecture</div>
        </header>

        <main>
            <section class="services-section" aria-labelledby="services-heading">
                <div class="container">
                    <h2 id="services-heading">Our Services</h2>
                    <div class="services-grid">
                        <a href="/experts/" class="service-item">
                            <h3>Property Search</h3>
                            <p>Discover extraordinary properties that match your lifestyle. Our expert agents use advanced search technology to find your perfect home.</p>
                        </a>
                        <a href="/market/" class="service-item">
                            <h3>Market Intelligence</h3>
                            <p>Get comprehensive market insights and pricing strategies. Make informed decisions with our professional market analysis.</p>
                        </a>
                        <a href="/negotiation/" class="service-item">
                            <h3>Negotiation &amp; Closing</h3>
                            <p>Expert negotiation services and seamless transaction management. We handle every detail to ensure your success.</p>
                        </a>
                    </div>
                </div>
            </section>

            <section id="consultation" aria-labelledby="consultation-heading">
                <div class="container">
                    <h2 id="consultation-heading">Let's Find Your Dream Home</h2>
                    <p>Connect with our expert real estate professionals and discover properties that exceed your expectations.</p>
                    <button type="button" class="contact-button" onclick="window.open('https://wa.me/31617622375', '_blank')">Get In Touch</button>
                </div>
            </section>

            <section class="contact-cta" aria-labelledby="newsletter-heading">
                <div class="container">
                    <h2 id="newsletter-heading">Stay Updated</h2>
                    <p>Be the first to know about new properties and market insights in Costa del Sol.</p>
                    <form action="https://formspree.io/f/mjkeqevn" method="POST">
                        <div class="newsletter-form">
                            <input type="email" id="newsletter-email" name="email" placeholder="Enter your email address" required class="newsletter-input">
                            <button type="submit" class="cta-button newsletter-submit">Subscribe</button>
                        </div>
                    </form>
                </div>
            </section>
        </main>

        <footer class="footer">
            <div class="container">
                <p>© 2025 AGG Homes. All rights reserved.</p>
                <p><a href="tel:+31617622375">(+31617622375)</a> | <a href="mailto:agg@post.com">agg@post.com</a></p>
            </div>

            <div id="admin-access">
                <button id="admin-login-btn" type="button" title="Admin Access - Click to Login">
                    ⚙️
                </button>
            </div>
        </footer>

        <script>
            // Admin login button functionality
            document.addEventListener('DOMContentLoaded', function () {
                console.log('Looking for admin login button...');
                const adminBtn = document.getElementById('admin-login-btn');

                if (adminBtn) {
                    console.log('Admin login button found and initialized');

                    adminBtn.addEventListener('click', function () {
                        console.log('Admin button clicked - opening login page');
                        window.open('admin-login.html', '_blank');
                    });

                    // Make it pulse occasionally to draw attention
                    setInterval(() => {
                        adminBtn.style.animation = 'pulse 1s ease-in-out';
                        setTimeout(() => {
                            adminBtn.style.animation = 'none';
                        }, 1000);
                    }, 10000); // Pulse every 10 seconds

                } else {
                    console.error('Admin login button NOT found!');
                }
            });

            // Contact modal functionality
            function openContactModal() {
                const modal = document.getElementById('contact-modal');
                modal.style.display = 'flex';
                document.body.style.overflow = 'hidden'; // Prevent background scrolling
            }

            function closeContactModal() {
                const modal = document.getElementById('contact-modal');
                modal.style.display = 'none';
                document.body.style.overflow = 'auto'; // Restore scrolling
            }

            function openChat() {
                // Try to open Intercom chat if available
                if (window.Intercom) {
                    window.Intercom('show');
                } else if (window.intercomSettings) {
                    // Fallback for other chat systems
                    console.log('Chat system not fully loaded yet');
                } else {
                    // Fallback: redirect to consultation page
                    window.location.href = '/consultation/';
                }
            }

            // Close modal when clicking outside
            document.addEventListener('DOMContentLoaded', function() {
                const modal = document.getElementById('contact-modal');
                if (modal) {
                    modal.addEventListener('click', function(e) {
                        if (e.target === modal) {
                            closeContactModal();
                        }
                    });
                }

                // Close modal with Escape key
                document.addEventListener('keydown', function(e) {
                    if (e.key === 'Escape' && modal && modal.style.display === 'flex') {
                        closeContactModal();
                    }
                });
            });

            // Add pulse animation CSS
            const style = document.createElement('style');
            style.textContent = `
                @keyframes pulse {
                    0% { transform: scale(1); opacity: 0.7; }
                    50% { transform: scale(1.2); opacity: 1; }
                    100% { transform: scale(1); opacity: 0.7; }
                }
            `;
            document.head.appendChild(style);
        </script>

        <!-- Chat System Integration - Load after page is interactive -->
        <!-- Official Intercom Chat Integration -->
        <script>
            // Load chat system after page becomes interactive to avoid blocking LCP
            if ('requestIdleCallback' in window) {
                requestIdleCallback(() => {
                    const script = document.createElement('script');
                    script.src = 'js/chat-system-new.js';
                    script.defer = true;
                    document.head.appendChild(script);
                });
            } else {
                // Fallback for browsers without requestIdleCallback
                window.addEventListener('load', () => {
                    setTimeout(() => {
                        const script = document.createElement('script');
                        script.src = 'js/chat-system-new.js';
                        script.defer = true;
                        document.head.appendChild(script);
                    }, 100);
                });
            }
        </script>

        <!-- Service Worker Registration -->
        <script>
            if ('serviceWorker' in navigator) {
                window.addEventListener('load', function() {
                    navigator.serviceWorker.register('/sw.js')
                        .then(function(registration) {
                            console.log('SW registered: ', registration);
                        })
                        .catch(function(registrationError) {
                            console.log('SW registration failed: ', registrationError);
                        });
                });
            }
        </script>

        <!-- Contact Modal -->
        <div id="contact-modal" class="modal-overlay">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Choose How to Contact Us</h3>
                    <button class="modal-close" type="button" onclick="closeContactModal()">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="contact-options">
                        <a href="https://wa.me/31617622375" class="contact-option whatsapp" target="_blank" rel="noopener" onclick="closeContactModal()">
                            <div class="contact-icon">💬</div>
                            <div class="contact-text">
                                <h4>WhatsApp</h4>
                                <p>Chat with us instantly on WhatsApp</p>
                            </div>
                        </a>
                        <button class="contact-option chat" type="button" onclick="openChat(); closeContactModal()">
                            <span class="contact-icon">💭</span>
                            <span class="contact-text">
                                <span class="contact-title">Live Chat</span>
                                <span class="contact-description">Start a conversation on our website</span>
                            </span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </body>

</html>
