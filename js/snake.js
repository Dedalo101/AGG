!function(){"use strict";if(!document.getElementById("snake-modal")){var e=document.createElement("div");e.id="snake-modal",e.style.display="none",e.innerHTML='      <div id="snake-wrap">        <canvas id="snake-canvas" width="400" height="300"></canvas>        <div style="display:flex;flex-direction:column;gap:6px">          <button id="snake-close">Close</button>          <div style="color:#fff">Score: <span id="snake-score">0</span></div>        </div>      </div>',document.body.appendChild(e)}try{if(!document.querySelector("link[data-snake-css]")){var t=document.createElement("link");t.rel="stylesheet",t.href="/js/snake.css",t.setAttribute("data-snake-css","1"),document.head.appendChild(t)}}catch(e){}function n(){var e=document.getElementById("snake-modal");if(e){var t=document.getElementById("snake-canvas"),n=document.getElementById("snake-score"),o=document.getElementById("snake-close"),a=function(e,t){var n=e.getContext("2d"),o=e.width,a=e.height,c=20,d=Math.floor(o/c),i=Math.floor(a/c),l=[{x:Math.floor(d/2),y:Math.floor(i/2)}],r={x:1,y:0},s=x(),y=!1,f=null,u=0;function x(){var e;do{e={x:Math.floor(Math.random()*d),y:Math.floor(Math.random()*i)}}while(l.some(t=>t.x===e.x&&t.y===e.y));return e}function m(){n.fillStyle="#000",n.fillRect(0,0,o,a),n.fillStyle="#0f0",l.forEach(e=>n.fillRect(e.x*c,e.y*c,19,19)),n.fillStyle="#f00",n.fillRect(s.x*c,s.y*c,19,19),t&&(t.textContent=u)}function v(){var e={x:l[0].x+r.x,y:l[0].y+r.y};return e.x<0||e.x>=d||e.y<0||e.y>=i||l.some(t=>t.x===e.x&&t.y===e.y)?h():(l.unshift(e),e.x===s.x&&e.y===s.y?(u++,s=x()):l.pop(),void m())}function h(){y=!1,f&&clearInterval(f)}function k(e){e.x===-r.x&&e.y===-r.y||(r=e)}return e.tabIndex=0,e.addEventListener("keydown",function(e){"ArrowUp"===e.key&&k({x:0,y:-1}),"ArrowDown"===e.key&&k({x:0,y:1}),"ArrowLeft"===e.key&&k({x:-1,y:0}),"ArrowRight"===e.key&&k({x:1,y:0})}),{start:function(){y||(y=!0,f=setInterval(v,100),m())},stop:h,reset:function(){h(),l=[{x:Math.floor(d/2),y:Math.floor(i/2)}],r={x:1,y:0},s=x(),u=0,m()},focus:function(){e.focus()}}}(t,n);o.addEventListener("click",d),e.addEventListener("click",function(t){t.target===e&&d()});var c=document.querySelector("a.cta-button, button.cta-button");c&&c.addEventListener("click",function(t){t.preventDefault(),e.style.display="flex",a.reset(),setTimeout(function(){a.start(),a.focus()},100)},{passive:!1})}function d(){e.style.display="none";try{a.stop()}catch(e){}}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",n):n()}();